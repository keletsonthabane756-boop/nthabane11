<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Administrator Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Administrator Dashboard</h1>
  </header>

  <main>
    <!-- Password Section -->
    <section id="adminPasswordSection">
      <h2>Enter Admin Password</h2>
      <form id="adminLoginForm">
        <input type="password" id="adminPasswordInput" placeholder="Password" required>
        <button type="submit">Login</button>
        <p id="loginMsg" class="error-msg">Incorrect password!</p>
      </form>
    </section>

    <!-- Dashboard Section -->
    <section id="adminDashboard" class="dashboard" style="display:none;">
      <!-- Manage Accounts -->
      <div class="admin-section">
        <h2>Manage Accounts</h2>
        <form id="addUserForm">
          <input type="text" id="username" placeholder="Username" required>
          <select id="userRole" required>
            <option value="">--Select Role--</option>
            <option value="student">Student</option>
            <option value="examiner">Examiner</option>
          </select>
          <button type="submit">Add Account</button>
        </form>
        <div id="userList"></div>
      </div>

      <!-- View Exams -->
      <div class="admin-section">
        <h2>Existing Exams</h2>
        <div id="examList"></div>
      </div>
    </section>
  </main>

  <script>
    const adminPassword = "admin123"; // default password
    const loginForm = document.getElementById('adminLoginForm');
    const passwordInput = document.getElementById('adminPasswordInput');
    const loginMsg = document.getElementById('loginMsg');
    const dashboard = document.getElementById('adminDashboard');
    const passwordSection = document.getElementById('adminPasswordSection');

    loginMsg.style.display = "none";

    // Admin login
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      if(passwordInput.value === adminPassword){
        passwordSection.style.display = "none";
        dashboard.style.display = "block";
        loadUsers();
        loadExams();
      } else {
        loginMsg.style.display = "block";
      }
    });

    /*** Manage Accounts ***/
    const addUserForm = document.getElementById('addUserForm');
    const userList = document.getElementById('userList');

    addUserForm.addEventListener('submit', e=>{
      e.preventDefault();
      const username = document.getElementById('username').value.trim();
      const role = document.getElementById('userRole').value;
      let users = JSON.parse(localStorage.getItem('users')) || [];
      users.push({username, role});
      localStorage.setItem('users', JSON.stringify(users));
      addUserForm.reset();
      loadUsers();
    });

    function loadUsers(){
      const users = JSON.parse(localStorage.getItem('users')) || [];
      userList.innerHTML = users.length ? '' : "<p>No accounts yet.</p>";
      users.forEach((u, i) => {
        const div = document.createElement('div');
        div.className = 'user-item';
        div.innerHTML = `${u.username} (${u.role}) <button class="btn-delete" onclick="deleteUser(${i})">Delete</button>`;
        userList.appendChild(div);
      });
    }

    function deleteUser(index){
      let users = JSON.parse(localStorage.getItem('users')) || [];
      users.splice(index,1);
      localStorage.setItem('users', JSON.stringify(users));
      loadUsers();
    }

    /*** View Exams ***/
    const examListDiv = document.getElementById('examList');

    function loadExams(){
      const exams = JSON.parse(localStorage.getItem('exams')) || [];
      examListDiv.innerHTML = exams.length ? '' : "<p>No exams available.</p>";
      exams.forEach((ex, i) => {
        const div = document.createElement('div');
        div.className = 'exam-item';
        div.textContent = `${ex.title} - ${ex.questions.length} questions`;
        examListDiv.appendChild(div);
      });
    }
  </script>
</body>
</html>


